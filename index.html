<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>방명록</title>
</head>
<body>
    <h1>방명록</h1>
    <form id="guestbook-form">
        <input type="text" id="name" placeholder="이름" required>
        <textarea id="message" placeholder="메시지" required></textarea>
        <button type="submit">작성하기</button>
    </form>
    <h2>방명록 목록</h2>
    <ul id="guestbook-entries"></ul>

    <!-- Firebase SDK 추가 -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"></script>

    <script>
        // Firebase 초기화 코드 (Firebase 설정 페이지에서 복사한 내용을 여기에 붙여넣으세요)
        const firebaseConfig = {
          apiKey: "AIzaSyBEY3a6nzR9Dl-FxPcSf2EwxcIgkrnhkzs",
          authDomain: "marry-15ccc.firebaseapp.com",
          databaseURL: "https://marry-15ccc-default-rtdb.firebaseio.com",
          projectId: "marry-15ccc",
          storageBucket: "marry-15ccc.firebasestorage.app",
          messagingSenderId: "88902830597",
          appId: "1:88902830597:web:c094709f33fc44b40e2a6c"
        };

        // Firebase 초기화
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // 방명록 데이터 읽기
        const entriesList = document.getElementById('guestbook-entries');
        firebase.database().ref('entries').on('value', (snapshot) => {
            entriesList.innerHTML = '';
            snapshot.forEach((childSnapshot) => {
                const entry = childSnapshot.val();
                const li = document.createElement('li');
                li.textContent = `${entry.name}: ${entry.message}`;
                entriesList.appendChild(li);
            });
        });

        // 방명록 데이터 추가
        const form = document.getElementById('guestbook-form');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value.trim();
            const message = document.getElementById('message').value.trim();
            if (name && message) {
                firebase.database().ref('entries').push({ name, message });
                form.reset();
            }
        });
    </script>
</body>
</html>
